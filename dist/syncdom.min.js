!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.syncdom=t()}(this,function(){"use strict";var d=1;function v(e,t){if(e.nodeType===t.nodeType)if(e.nodeType===d){if(a=t,l=(n=e).getAttribute("data-domsame"),o=a.getAttribute("data-domsame"),l&&o&&l===o||a.isSameNode(n))return;if(function(a,e){for(var t=[],i=[],r=e.firstChild;r;r=r.nextSibling){var n=h(r);i.push({node:r,key:n}),n&&t.push(n)}for(var l=Object.create(null),o=a.firstChild;o;o=o.nextSibling){var d=h(o);d&&(0<=t.indexOf(d)?l[d]=o:a.removeChild(o))}var u=a.firstChild;for(var f in i.forEach(function(e){var t=e.node,i=e.key,r=i?l[i]:null;if(r)delete l[i],r===u?u=u.nextSibling:a.insertBefore(r,u),v(r,t);else if(u)if(i)a.insertBefore(t,u);else for(;;){if(!u){a.appendChild(t);break}var n=u;if(u=u.nextSibling,!c(l,n)){v(n,t);break}}else a.appendChild(t)}),l)a.removeChild(l[f]);var s=a.childNodes.length-i.length;for(;0<=--s;)a.removeChild(a.lastChild)}(e,t),e.nodeName===t.nodeName)(function(e,t){for(var i=e.attributes,r=i.length-1;0<=r;r-=1){var n=i[r],a=n.namespaceURI,l=n.localName;t.hasAttributeNS(a,l)||e.removeAttributeNS(a,l)}})(i=e,r=t),function(e,t){for(var i=t.attributes,r=i.length-1;0<=r;r-=1){var n=i[r],a=n.namespaceURI,l=n.localName,o=t.getAttributeNS(a,l),d=e.getAttributeNS(a,l);o!==d&&e.setAttributeNS(a,l,o)}}(i,r),function(e,t){var i=e.nodeName;if("INPUT"===i){u(e,t,"checked");var r=t.value;e.value!==r&&(e.value=r),t.hasAttributeNS(null,"value")||e.removeAttribute("value")}else if("TEXTAREA"===i){var n=t.value;e.value!==n&&(e.value=n)}else"OPTION"===i&&u(e,t,"selected")}(i,r);else{for(;t.lastChild;)t.removeChild(t.lastChild);for(;e.firstChild;)t.appendChild(e.firstChild);e.parentNode.replaceChild(t,e)}}else e.nodeValue!==t.nodeValue&&(e.nodeValue=t.nodeValue);else e.parentNode.replaceChild(t,e);var i,r,n,a,l,o}function u(e,t,i){e[i]!==t[i]&&(e[i]=t[i],e[i]?e.setAttribute(i,""):e.removeAttribute(i))}function h(e){if(e.nodeType===d)return e.getAttribute("data-domkey")}function c(e,t){for(var i in e)if(e[i]===t)return!0;return!1}return v});
