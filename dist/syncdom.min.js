!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(n=n||self).syncdom=e()}(this,function(){"use strict";var n=["onfocus","onblur","onfocusin","onfocusout","onsubmit","onreset","onchange","oninput","onkeydown","onkeyup","onkeypress","oncompositionstart","oncompositionend","oncompositionupdate","onclick","ondblclick","onmouseenter","onmouseleave","onmouseover","onmouseout","onmousedown","onmouseup","onmousemove","onwheel","ontouchstart","ontouchend","ontouchmove","ontouchcancel","ondrag","ondrop","ondragstart","ondragend","ondragenter","ondragleave","ondragover","onscroll","onresize","onselect","onerror","onload","onunload","onbeforeunload","onabort","onhashchange","oncontextmenu","onpageshow","onpagehide","onvisibilitychange","oninvalid"],o=Array.isArray,t=Object.getOwnPropertyNames,e=Array.prototype.slice,u=function(u,n){var e,i,r;"TEXTAREA"!==u.nodeName&&(e=n.map(function(n){return{node:n,key:b(n)}}),i=l(u,e),r=u.firstChild,e.forEach(function(n){var e=n.node,o=n.key,t=o?i[o]:null;if(t)delete i[o],a(t,e),t===r?r=r.nextSibling:A(u,t,r);else if(r)if(o)A(u,e,r);else for(;;){if(!r){g(u,e);break}if(!S(i,r)){a(r,e),r=r.nextSibling;break}r=r.nextSibling}else g(u,e)}),c(u,i),f(u,n))},a=function(n,e){if(n.nodeType===e.nodeType)if(1===n.nodeType){if(v(n,e))return;var o;n.nodeName===e.nodeName?(i(n,e),o=[],k(e,function(n){o.push(n)}),u(n,o)):N(n,e)}else n.nodeValue!==e.nodeValue&&(n.nodeValue=e.nodeValue);else N(n,e)},l=function(o,n){var t=n.map(function(n){return n.key}).filter(function(n){return n}),u=Object.create(null);return k(o,function(n){var e=b(n);e&&(0<=t.indexOf(e)?u[e]=n:y(o,n))}),u},c=function(e,o){t(o).forEach(function(n){y(e,o[n])})},f=function(n,e){T(n.childNodes.length-e.length,function(){y(n,n.lastChild)})},i=function(n,e){r(n,e),s(n,e),d(n,e),m(n,e)},r=function(t,u){e.call(t.attributes).forEach(function(n){var e=n.namespaceURI,o=n.localName;!u.hasAttributeNS(e,o)&&t.hasAttributeNS(e,o)&&t.removeAttributeNS(e,o)})},s=function(u,i){e.call(i.attributes).forEach(function(n){var e=n.namespaceURI,o=n.localName,t=i.getAttributeNS(e,o);t!==u.getAttributeNS(e,o)&&u.setAttributeNS(e,o,t)})},d=function(o,t){n.forEach(function(n){var e=t[n];e?e!==o[n]&&(o[n]=e):o[n]&&(o[n]=void 0)})},m=function(n,e){var o,t,u=n.nodeName;"INPUT"===u?(h(n,e,"checked"),o=e.value,n.value!==o&&(n.value=o),!e.hasAttributeNS(null,"value")&&n.hasAttributeNS(null,"value")&&n.removeAttributeNS(null,"value")):"TEXTAREA"===u?(t=e.value,n.value!==t&&(n.value=t)):"OPTION"===u&&h(n,e,"selected")},h=function(n,e,o){n[o]!==e[o]&&(n[o]=e[o],n[o]?n.hasAttributeNS(null,o)||n.setAttributeNS(null,o,""):n.hasAttributeNS(null,o)&&n.removeAttributeNS(null,o))},v=function(n,e){var o=n.getAttributeNS(null,"domsame"),t=e.getAttributeNS(null,"domsame");return o&&t&&o===t||e.isSameNode(n)},b=function(n){return 1===n.nodeType?n.getAttributeNS(null,"domkey"):null},p=function(n){for(var e=n.lastChild;e;e=n.lastChild)y(n,e)},N=function(n,e){n.parentNode.replaceChild(e,n)},g=function(n,e){n.appendChild(e)},A=function(n,e,o){n.insertBefore(e,o)},y=function(n,e){n.removeChild(e)},S=function(e,o){return null!=e&&t(e).some(function(n){return e[n]===o})},k=function(n,e){for(var o=n.firstChild;o;){var t=o.nextSibling;e(o),o=t}},T=function(n,e){for(var o=0;o<n;o+=1)e(o)};return function(n,e){o(e)?u(n,e):null!=e?u(n,[e]):p(n)}});
