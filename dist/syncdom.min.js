!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.syncdom=n()}(this,function(){"use strict";var e=["onfocus","onblur","onfocusin","onfocusout","onsubmit","onreset","onchange","oninput","onkeydown","onkeyup","onkeypress","oncompositionstart","oncompositionend","oncompositionupdate","onclick","ondblclick","onmouseenter","onmouseleave","onmouseover","onmouseout","onmousedown","onmouseup","onmousemove","onwheel","ontouchstart","ontouchend","ontouchmove","ontouchcancel","ondrag","ondrop","ondragstart","ondragend","ondragenter","ondragleave","ondragover","onscroll","onresize","onselect","onerror","onload","onunload","onbeforeunload","onabort","onhashchange","oncontextmenu","onpageshow","onpagehide","onvisibilitychange","oninvalid"],o=Array.isArray,t=Object.getOwnPropertyNames,n=Array.prototype.slice,u=function(u,e){if("TEXTAREA"!==u.nodeName){var n=e.map(function(e){return{node:e,key:b(e)}}),r=a(u,n),i=u.firstChild;n.forEach(function(e){var n=e.node,o=e.key,t=o?r[o]:null;if(t)delete r[o],l(t,n),t===i?i=i.nextSibling:A(u,t,i);else if(i)if(o)A(u,n,i);else for(;;){if(!i){g(u,n);break}if(!S(r,i)){l(i,n),i=i.nextSibling;break}i=i.nextSibling}else g(u,n)}),c(u,r),f(u,e)}},l=function(e,n){if(e.nodeType===n.nodeType)if(1===e.nodeType){if(h(e,n))return;if(e.nodeName===n.nodeName){r(e,n);var o=[];k(n,function(e){return o.push(e)}),u(e,o)}else N(e,n)}else e.nodeValue!==n.nodeValue&&(e.nodeValue=n.nodeValue);else N(e,n)},a=function(o,e){var t=e.map(function(e){return e.key}).filter(function(e){return e}),u=Object.create(null);return k(o,function(e){var n=b(e);n&&(0<=t.indexOf(n)?u[n]=e:y(o,e))}),u},c=function(n,o){return t(o).forEach(function(e){return y(n,o[e])})},f=function(e,n){T(e.childNodes.length-n.length,function(){return y(e,e.lastChild)})},r=function(e,n){i(e,n),s(e,n),d(e,n),m(e,n)},i=function(t,u){n.call(t.attributes).forEach(function(e){var n=e.namespaceURI,o=e.localName;!u.hasAttributeNS(n,o)&&t.hasAttributeNS(n,o)&&t.removeAttributeNS(n,o)})},s=function(u,r){n.call(r.attributes).forEach(function(e){var n=e.namespaceURI,o=e.localName,t=r.getAttributeNS(n,o);t!==u.getAttributeNS(n,o)&&u.setAttributeNS(n,o,t)})},d=function(o,t){e.forEach(function(e){var n=t[e];n?n!==o[e]&&(o[e]=n):o[e]&&(o[e]=void 0)})},m=function(e,n){var o=e.nodeName;if("INPUT"===o){v(e,n,"checked");var t=n.value;e.value!==t&&(e.value=t),!n.hasAttributeNS(null,"value")&&e.hasAttributeNS(null,"value")&&e.removeAttributeNS(null,"value")}else if("TEXTAREA"===o){var u=n.value;e.value!==u&&(e.value=u)}else"OPTION"===o&&v(e,n,"selected")},v=function(e,n,o){e[o]!==n[o]&&(e[o]=n[o],e[o]?e.hasAttributeNS(null,o)||e.setAttributeNS(null,o,""):e.hasAttributeNS(null,o)&&e.removeAttributeNS(null,o))},h=function(e,n){var o=e.getAttributeNS(null,"domsame"),t=n.getAttributeNS(null,"domsame");return o&&t&&o===t||n.isSameNode(e)},b=function(e){return 1===e.nodeType?e.getAttributeNS(null,"domkey"):null},p=function(e){for(var n=e.lastChild;n;n=e.lastChild)y(e,n)},N=function(e,n){return e.parentNode.replaceChild(n,e)},g=function(e,n){return e.appendChild(n)},A=function(e,n,o){return e.insertBefore(n,o)},y=function(e,n){return e.removeChild(n)},S=function(n,o){return null!=n&&t(n).some(function(e){return n[e]===o})},k=function(e,n){for(var o=e.firstChild;o;o=o.nextSibling)n(o)},T=function(e,n){for(var o=0;o<e;o+=1)n(o)};return function(e,n){o(n)?u(e,n):null!=n?u(e,[n]):p(e)}});
