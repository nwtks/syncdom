!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.syncdom=t()}(this,function(){"use strict";var d=1,n=Array.isArray;function c(r,e){if("TEXTAREA"!==r.nodeName){var t=e.map(function(e){return{node:e,key:f(e)}}),o=function(e,t){for(var n=t.map(function(e){return e.key}).filter(function(e){return e}),i=Object.create(null),r=e.firstChild;r;r=r.nextSibling){var o=f(r);o&&(0<=n.indexOf(o)?i[o]=r:b(e,r))}return i}(r,t),u=r.firstChild;t.forEach(function(e){var t=e.node,n=e.key,i=n?o[n]:null;if(i)delete o[n],a(i,t),i===u?u=u.nextSibling:m(r,i,u);else if(u)if(n)m(r,t,u);else for(;;){if(!u){l(r,t);break}if(!h(o,u)){a(u,t),u=u.nextSibling;break}u=u.nextSibling}else l(r,t)}),function(e,t){for(var n in t)b(e,t[n])}(r,o),function(e,t){for(var n=e.childNodes.length-t.length;0<n;--n)b(e,e.lastChild)}(r,e)}}function a(e,t){if(e.nodeType===t.nodeType)if(e.nodeType===d){if(a=t,f=(u=e).getAttribute("domsame"),l=a.getAttribute("domsame"),f&&l&&f===l||a.isSameNode(u))return;if(e.nodeName===t.nodeName){(function(e,t){for(var n=e.attributes,i=n.length-1;0<=i;--i){var r=n[i],o=r.namespaceURI,u=r.localName;t.hasAttributeNS(o,u)||e.removeAttributeNS(o,u)}})(r=e,o=t),function(e,t){for(var n=t.attributes,i=n.length-1;0<=i;--i){var r=n[i],o=r.namespaceURI,u=r.localName,a=t.getAttributeNS(o,u),f=e.getAttributeNS(o,u);a!==f&&e.setAttributeNS(o,u,a)}}(r,o),function(e,t){var n=e.nodeName;if("INPUT"===n){s(e,t,"checked");var i=t.value;e.value!==i&&(e.value=i),t.hasAttributeNS(null,"value")||e.removeAttribute("value")}else if("TEXTAREA"===n){var r=t.value;e.value!==r&&(e.value=r)}else"OPTION"===n&&s(e,t,"selected")}(r,o);for(var n=[],i=t.firstChild;i;i=i.nextSibling)n.push(i);c(e,n)}else v(e,t)}else e.nodeValue!==t.nodeValue&&(e.nodeValue=t.nodeValue);else v(e,t);var r,o,u,a,f,l}function s(e,t,n){e[n]!==t[n]&&(e[n]=t[n],e[n]?e.setAttribute(n,""):e.removeAttribute(n))}function f(e){if(e.nodeType===d)return e.getAttribute("domkey")}function v(e,t){e.parentNode.replaceChild(t,e)}function l(e,t){e.appendChild(t)}function m(e,t,n){e.insertBefore(t,n)}function b(e,t){e.removeChild(t)}function h(e,t){for(var n in e)if(e[n]===t)return!0;return!1}return function(e,t){n(t)?c(e,t):null!=t?c(e,[t]):function(e){for(var t=e.lastChild;t;t=e.lastChild)b(e,t)}(e)}});
